@model Accounting.Models.PaginatedViewModel

@{
  ViewData["Title"] = "Items and Assemblies - " + ConfigurationSingleton.Instance.ApplicationName;
}

@{
  string headerText = "Items and Assemblies";
}
<partial name="_H1HeaderPartial" model="@headerText" />

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<div id="app">
  <div class="margin-bottom-5px display-flex font-Roboto font-size-20px background-color-antiquewhite">
    <div>
      <a :href="`/item/items-and-assemblies?page=${page - 1}&pageSize=${pageSize}`" v-if="page > 1" class="color-darkslategray text-decoration-none">prev</a>
    </div>
    <div class="flex-1"></div>
    <div>
      <a :href="`/item/items-and-assemblies?page=${nextPage}&pageSize=${pageSize}`" v-if="nextPage" class="color-darkslategray text-decoration-none">next</a>
    </div>
  </div>
</div>

<script>
  const { createApp } = Vue;

  const app = createApp({
    data() {
      return {
        items: [],
        page: @Model.Page,
        pageSize: @Model.PageSize,
        nextPage: null,
      }
    },
    methods: {
      fetchItems() {
        fetch(`/api/inv/items-and-assemblies?page=${this.page}&pageSize=${this.pageSize}`)
          .then(response => response.json())
          .then(data => {
            this.items = data.items;
            if (data.currentPage > 0) {
              this.page = data.currentPage;
            }
            if (data.nextPage > 0) {
              this.nextPage = data.nextPage;
            }
          });
      },
    },
    mounted() {
      this.fetchItems();
    }
  });

  app.mount('#app');
</script>